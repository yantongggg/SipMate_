  name: AI-Driven Pentest

  permissions:
    contents: read
    pull-requests: write
    actions: write
    checks: write

  on:
    push:
      branches: [ "main", "master", "develop" ]
    pull_request:
      branches: [ "main", "master", "develop" ]
    workflow_dispatch:

  jobs:
    ai-pentest:
      uses:
  yantongggg/TM_M/.github/workflows/ai-pentest-reusable.yml@v2.2.0
      with:
        semgrep_config: auto          # Semgrep rules to use
        skip_logic_audit: false       # Set true to skip business logic
  audit (saves tokens)
        max_logic_files: 5            # Max files to analyze for logic
  flaws
        fail_on_critical: false       # Set true to fail workflow on
  Critical/High findings
      secrets:
        openrouter_api_key: ${{ secrets.OPENROUTER_API_KEY }}
